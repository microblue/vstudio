<script lang="ts">
	import { page } from '$app/stores';

	let { data, children } = $props();

	const navItems = [
		{ href: '', label: 'æ¦‚è§ˆ', icon: 'ğŸ“Š' },
		{ href: '/script/create', label: 'å‰§æœ¬åˆ›ä½œ', icon: 'âœ¨' },
		{ href: '/script', label: 'å‰§æœ¬ç¼–è¾‘', icon: 'ğŸ“' },
		{ href: '/assets', label: 'èµ„äº§ç®¡ç†', icon: 'ğŸ­' },
		{ href: '/shots', label: 'åˆ†é•œç¼–è¾‘', icon: 'ğŸ¬' },
		{ href: '/generate', label: 'ç”»é¢ç”Ÿæˆ', icon: 'ğŸ–¼ï¸' },
		{ href: '/audio', label: 'éŸ³é¢‘å·¥ä½œå°', icon: 'ğŸµ' },
		{ href: '/compose', label: 'åæœŸåˆæˆ', icon: 'ğŸï¸' },
		{ href: '/export', label: 'å¯¼å‡º', icon: 'ğŸ“¤' }
	];

	const basePath = $derived(`/(app)/project/${data.project.id}`);
</script>

<div class="flex h-full">
	<!-- Project Sidebar -->
	<aside class="w-48 shrink-0 border-r bg-background">
		<div class="p-3 border-b">
			<h2 class="font-semibold text-sm truncate">{data.project.name}</h2>
			<p class="text-xs text-muted-foreground">é¡¹ç›®å¯¼èˆª</p>
		</div>
		<nav class="p-2 space-y-0.5">
			{#each navItems as item}
				{@const fullHref = basePath + item.href}
				<a
					href={fullHref}
					class="flex items-center gap-2 rounded-md px-3 py-1.5 text-sm hover:bg-accent transition-colors"
					class:bg-accent={$page.url.pathname === fullHref}
				>
					<span>{item.icon}</span>
					<span>{item.label}</span>
				</a>
			{/each}
		</nav>
	</aside>

	<!-- Content -->
	<div class="flex-1 overflow-auto">
		{@render children()}
	</div>
</div>
